<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/diarmidmackenzie/key-bindings@v0.3-alpha/key-bindings.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/diarmidmackenzie/6dof-object-control@v0.5-alpha/src/thumbstick-object-control.min.js"></script>
    <script src="./scale.js"></script>
  </head>
  <body>
    <a-scene renderer="colorManagement:true" stats
             cursor="rayOrigin: mouse; fuse: false"
             raycaster="objects: .clickable-object">
      <a-assets>
        <a-asset-item id="text" src="./assets/text/text.json">
        </a-asset-item>
        <a-asset-item id="earth"
           src="./assets/earth/scene.gltf"
           response-type="arraybuffer" crossorigin="anonymous">
        </a-asset-item>
        <a-asset-item id="deimos"
           src="./assets/deimos/scene.gltf"
           response-type="arraybuffer" crossorigin="anonymous">
        </a-asset-item>
        <a-asset-item id="eiffel"
           src="./assets/eiffel/scene.gltf"
           response-type="arraybuffer" crossorigin="anonymous">
        </a-asset-item>
        <a-asset-item id="trex"
           src="./assets/t-rex/scene.gltf"
           response-type="arraybuffer" crossorigin="anonymous">
        </a-asset-item>
        <a-asset-item id="chicken"
           src="./assets/chicken/scene.gltf"
           response-type="arraybuffer" crossorigin="anonymous">
        </a-asset-item>
        <a-asset-item id="ant"
           src="./assets/ant/scene.gltf"
           response-type="arraybuffer" crossorigin="anonymous">
        </a-asset-item>
        <a-asset-item id="cell"
           src="./assets/cell/scene.gltf"
           response-type="arraybuffer" crossorigin="anonymous">
        </a-asset-item>
        <a-asset-item id="virus"
           src="./assets/virus/scene.gltf"
           response-type="arraybuffer" crossorigin="anonymous">
        </a-asset-item>
        <a-asset-item id="glucose"
           src="./assets/glucose/scene.gltf"
           response-type="arraybuffer" crossorigin="anonymous">
        </a-asset-item>
      </a-assets>

      <a-entity id="rig" movement-controls="controls:keyboard,touch"
                         thumbstick-object-control="movestick:#lhand;
                                                    rotatestick:none;
                                                    moverepeattime:1;
                                                    axes:XZ;
                                                    posunit:0.05"
                         state-driven-movement
                         key-bindings="bindings:ShiftLeft=$y-plus,
                                                ControlLeft=$y-minus,
                                                KeyQ=$y-rot-plus,
                                                KeyE=$y-rot-minus"
                         thumbstick-states__right="controller:#rhand;
                                                  bindings:y-minus,y-plus,y-rot-minus,y-rot-plus">


        <a-entity id="camera" position="0 1.6 0" look-controls>
        </a-entity>
        <a-entity id="scale" position="0 1.05 -0.85" rotation = "-45 0 0" scale-ruler="target:#scale-container">
        </a-entity>
        <a-entity id="info-panel" position="0 0.65 -0.45"
                  rotation = "-45 0 0" info-panel
                  clickable-object="id:#info-panel">
        </a-entity>
        <a-entity id="rhand"
                  laser-controls="hand: right" raycaster="objects: .clickable-object; lineColor: red; lineOpacity: 0.5"
                  hand-controls="hand: right">
        </a-entity>
        <a-entity id="lhand"
                  hand-controls="hand: left">
        </a-entity>
      </a-entity>
      <a-entity id="origin">
      </a-entity>
      <a-entity position="0 1 -4">
        <a-entity id="scale-container" scalable="center:#origin"
                  key-bindings="debug:true;
                                bindings:KeyZ=scale-out,
                                         KeyX=scale-in,
                                         #lhand.gripdown=$scaling-out,
                                         #lhand.gripup=%scaling-out,
                                         #rhand.gripdown=$scaling-in,
                                         #rhand.gripup=%scaling-in,
                                         KeyN=$scaling-out,
                                         KeyM=$scaling-in">
          <a-entity id="earth" position="16000000 0 0"
                    gltf-model="#earth"
                    clickable-object="id:#earth"
                    scale="1600 1600 1600">
          </a-entity>
          <a-entity id="deimos" position="-1000 0 -10000"
                    gltf-model="#deimos"
                    clickable-object="id:#deimos"
                    scale="10 10 10">
          </a-entity>
          <a-entity id="eiffel" position="100 -2 0"
                    clickable-object="id:#eiffel"
                    rotation="0 0 0"
                    gltf-model="#eiffel"
                    scale="2 2 2">
          </a-entity>
          <a-entity id="trex" position="-3 -1 0"
                    clickable-object="id:#trex"
                    gltf-model="#trex"
                    scale="0.06 0.06 0.06">
          </a-entity>
          <a-entity id="chicken" position="1 0 0"
                    clickable-object="id:#chicken"
                    gltf-model="#chicken"
                    scale="0.4 0.4 0.4">
          </a-entity>
          <a-entity id="ant" position="0.01 0 0"
                    clickable-object="id:#ant"
                    gltf-model="#ant"
                    rotation="0 90 0"
                    scale="0.002 0.002 0.002">
          </a-entity>
          <a-entity id="cell" position="-0.000025 0 0"
                    clickable-object="id:#cell"
                    gltf-model="#cell"
                    scale="0.0000025 0.0000025 0.0000025">
          </a-entity>
          <a-entity id="virus" position="0.0000003 0 0"
                    clickable-object="id:#virus"
                    gltf-model="#virus"
                    scale="0.000000001 0.000000001 0.000000001">
          </a-entity>
          <a-entity id="glucose" position="-0.000000002 0 0"
                    clickable-object="id:#glucose"
                    gltf-model="#glucose"
                    scale="0.000000000005 0.000000000005 0.000000000005">
          </a-entity>
        </a-entity>
      </a-entity>
    </a-scene>
  </body>
</html>
